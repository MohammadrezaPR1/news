# راهنمای حل مشکل ETIMEDOUT (اختلال شبکه)

ارور `ETIMEDOUT` یعنی سیستم شما سعی می‌کند به دیتابیس وصل شود ولی اینترنت شما اجازه نمی‌دهد درخواست به مقصد برسد. این مشکل معمولاً به دلیل محدودیت‌های ISP (ارائه دهنده اینترنت) روی پورت‌های خاص است.

دقیقاً این ۳ راه را امتحان کنید:

---

## ۱. تغییر پورت به ۵۴۳۲ (مهم‌ترین راه)
بعضی از اینترنت‌ها پورت ۶۵۴۳ را مسدود می‌کنند ولی ۵۴۳۲ (پورت استاندارد دیتابیس) را باز می‌گذارند.
۱. فایل `.env` را باز کنید.
۲. در انتهای آدرس دیتابیس، عدد `:6543` را پاک کنید و بجای آن `:5432` بگذارید.
   - مثال آدرس جدید: `postgres://postgres.xxx:pass@aws-0-xxx.pooler.supabase.com:5432/postgres`
۳. دوباره دستور `node test-db.js` را تست کنید.

---

## ۲. بررسی تنظیمات آی‌پی در Supabase
۱. در پنل Supabase به بخش **Security & Compliance > Network Restrictions** بروید.
۲. مطمئن شوید که محدودیتی وجود ندارد. اگر دکمه‌ای برای **Allow all IP addresses** (یا افزودن `0.0.0.0/0`) می‌بینید، آن را بزنید. (البته به صورت پیش‌فرض باز است).

---

## ۳. تست با اینترنت متفاوت (یا VPN)
۱. اگر از اینترنت گوشی استفاده می‌کنید، آن را به اینترنت ثابت تغییر دهید یا برعکس.
۲. در صورت امکان، یک VPN با کیفیت (که پورت‌ها را نبندد) را روشن کنید و دوباره `node test-db.js` را بزنید.

---

### اگر باز هم وصل نشد:
این یعنی اینترنت شما به هیچ وجه اجازه خروج اطلاعات روی پروتکل Postgres را نمی‌دهد. در این صورت، ما باید از **Supabase API (HTTP)** استفاده کنیم که روش متفاوتی است. ولی فعلاً تست پورت ۵۴۳۲ (مرحله ۱) احتمال ۹۰٪ مشکل شما را حل می‌کند.
