# راهنمای فوق دقیق راه‌اندازی پروژه (گام به گام)

این راهنما دقیقاً به شما می‌گوید چه چیزی را از کجا کپی کنید و در کجا قرار دهید.

---

## ۱. در سایت Supabase (تنظیم دیتابیس)
۱. وارد سایت [Supabase](https://supabase.com/) شوید و پروژه خود را باز کنید.
۲. در منوی سمت چپ، روی آیکون **Settings** (چرخ‌دنده) و سپس **Database** کلیک کنید.
۳. صفحه را پایین بکشید تا به بخش **Connection string** برسید.
۴. **بسیار مهم**: در اینجا ۲ انتخاب دارید. حتماً روی حالت **Transaction pooler** کلیک کنید. (حالت Direct connection به دلیل مشکلات IPv6 در اکثر اینترنت‌ها کار نمی‌کند).
۵. گزینه **Mode** را هم چک کنید که روی **Transaction** باشد.
۶. در کادر متنی (تب **URI**)، آدرسی می‌بینید که در آن کلمه `pooler` وجود دارد، مثلاً:
   `postgres://postgres.[YOUR-ID]:[YOUR-PASSWORD]@aws-0-eu-central-1.pooler.supabase.com:6543/postgres`
۷. دکمه **Copy** را بزنید.
۸. پارامتر `[YOUR-PASSWORD]` را پاک کنید و رمزی که موقع ساختن پروژه در Supabase انتخاب کردید را بنویسید. این آدرس نهایی شماست.

---

## ۲. در پروژه شما (بخش Backend)
۱. به پوشه `backend` بروید و فایل `.env` را باز کنید.
۲. آدرس مرحله قبل را جلوی این متغیر بنویسید:
   `DATABASE_URL=آدرس_کپی_شده_از_سوپابیس`
۳. ترمینال را باز کنید و در پوشه `backend` دستور `npm start` را بزنید.
   - **اتفاقی که می‌افتد**: اگر همه چیز درست باشد، پیام `Database connected !` ظاهر می‌شود و جدول‌ها ساخته می‌شوند.

---

## ۳. در پروژه شما (بخش Frontend)
۱. به پوشه `frontend` بروید و فایل `.env.local` را باز کنید.
۲. این متن را داخلش بگذارید:
   `VITE_API_URL=http://localhost:5000/.netlify/functions/index`

---

## ۴. آپلود در GitHub
۱. کل پروژه را در GitHub آپلود کنید.

---

## ۵. در سایت Netlify (دیپلوی نهایی)
۱. پروژه را به Netlify وصل کنید.
۲. در بخش **Environment Variables**، این ۵ مورد را وارد کنید:

| Key (اسم متغیر) | Value (مقدار) |
| :--- | :--- |
| `DATABASE_URL` | همان آدرس Pooler که از سوپابیس گرفتید (مرحله ۱.۸) |
| `ACCSESS_TOKEN_SECRET` | یک متن تصادفی دلخواه |
| `REFRESH_TOKEN_SECRET` | یک متن تصادفی دلخواه دیگر |
| `FRONTEND_URL` | آدرس سایت نهایی شما در نتلیفای (مثلاً: `https://site.netlify.app`) |
| `VITE_API_URL` | همان آدرس سایت شما + `/.netlify/functions/index` |

۳. دکمه **Deploy** را بزنید.
